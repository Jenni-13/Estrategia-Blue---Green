version: "3.9"

services:

  # FRONTEND
  frontend_blue:
    build:
      context: .
      dockerfile: Dockerfile.client
    container_name: frontend_blue
    # ðŸ”µ CORRECCIÃ“N: Puerto 3000 del HOST (VM) mapea al puerto 80 del contenedor
    ports:
      - "3000:80" 
    networks:
      - blueng

  frontend_green:
    build:
      context: .
      dockerfile: Dockerfile.client
    container_name: frontend_green
    # ðŸŸ¢ CORRECCIÃ“N: Puerto 3001 del HOST (VM) mapea al puerto 80 del contenedor
    ports:
      - "3001:80" 
    networks:
      - blueng
    
  # ... (Los backends no necesitan puertos pÃºblicos si solo se comunican con el frontend)

  # BACKEND
  backend_blue:
    # ... (Sin cambios)

  backend_green:
    # ... (Sin cambios)

  # NGINX LOAD BALANCER
  nginx:
    # ... (Sin cambios)

networks:
  blueng:
